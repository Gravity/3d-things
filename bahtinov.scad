
// Module names are of the form poly_<inkscape-path-id>().  As a result,
// you can associate a polygon in this OpenSCAD program with the corresponding
// SVG element in the Inkscape document by looking for the XML element with
// the attribute id="inkscape-path-id".

// fudge value is used to ensure that subtracted solids are a tad taller
// in the z dimension than the polygon being subtracted from.  This helps
// keep the resulting .stl file manifold.
fudge = 0.1;

module poly_path1(h)
{
  union()
  {
    scale([25.4/90, -25.4/90, 1]) union()
    {
      difference()
      {
         linear_extrude(height=h)
           polygon([[0.000000,-248.031693],[12.763687,-247.708955],[25.359818,-246.751133],[37.772781,-245.173810],[49.987045,-242.992570],[61.986984,-240.222998],[73.757034,-236.880678],[85.281631,-232.981194],[96.545151,-228.540133],[107.531998,-223.573074],[118.226639,-218.095606],[128.613480,-212.123310],[138.676895,-205.671772],[148.401321,-198.756580],[157.771194,-191.393311],[166.770920,-183.597549],[175.384903,-175.384888],[183.597549,-166.770905],[191.393326,-157.771187],[198.756577,-148.401314],[205.671768,-138.676872],[212.123306,-128.613449],[218.095627,-118.226624],[223.573074,-107.531998],[228.540146,-96.545120],[232.981186,-85.281616],[236.880692,-73.757034],[240.223007,-61.986984],[242.992569,-49.987030],[245.173813,-37.772781],[246.751144,-25.359802],[247.708969,-12.763672],[248.031693,0.000000],[247.708969,12.763687],[246.751144,25.359818],[245.173813,37.772781],[242.992569,49.987045],[240.223007,61.986984],[236.880692,73.757034],[232.981186,85.281631],[228.540146,96.545151],[223.573074,107.531998],[218.095627,118.226639],[212.123306,128.613480],[205.671768,138.676895],[198.756577,148.401321],[191.393326,157.771194],[183.597549,166.770920],[175.384903,175.384903],[166.770920,183.597549],[157.771194,191.393326],[148.401321,198.756577],[138.676895,205.671768],[128.613480,212.123306],[118.226639,218.095627],[107.531998,223.573074],[96.545151,228.540146],[85.281631,232.981186],[73.757034,236.880692],[61.986984,240.223007],[49.987045,242.992569],[37.772781,245.173813],[25.359818,246.751144],[12.763687,247.708969],[0.000000,248.031693],[-12.763672,247.708969],[-25.359802,246.751144],[-37.772781,245.173813],[-49.987030,242.992569],[-61.986984,240.223007],[-73.757034,236.880692],[-85.281616,232.981186],[-96.545120,228.540146],[-107.531998,223.573074],[-118.226624,218.095627],[-128.613449,212.123306],[-138.676872,205.671768],[-148.401314,198.756577],[-157.771187,191.393326],[-166.770905,183.597549],[-175.384888,175.384903],[-183.597549,166.770920],[-191.393311,157.771194],[-198.756580,148.401321],[-205.671772,138.676895],[-212.123310,128.613480],[-218.095606,118.226639],[-223.573074,107.531998],[-228.540133,96.545151],[-232.981194,85.281631],[-236.880678,73.757034],[-240.222998,61.986984],[-242.992570,49.987045],[-245.173810,37.772781],[-246.751133,25.359818],[-247.708955,12.763687],[-248.031693,0.000000],[-247.708955,-12.763672],[-246.751133,-25.359802],[-245.173810,-37.772781],[-242.992570,-49.987030],[-240.222998,-61.986984],[-236.880678,-73.757034],[-232.981194,-85.281616],[-228.540133,-96.545120],[-223.573074,-107.531998],[-218.095606,-118.226624],[-212.123310,-128.613449],[-205.671772,-138.676872],[-198.756580,-148.401314],[-191.393311,-157.771187],[-183.597549,-166.770905],[-175.384888,-175.384888],[-166.770905,-183.597549],[-157.771187,-191.393311],[-148.401314,-198.756580],[-138.676872,-205.671772],[-128.613449,-212.123310],[-118.226624,-218.095606],[-107.531998,-223.573074],[-96.545120,-228.540133],[-85.281616,-232.981194],[-73.757034,-236.880678],[-61.986984,-240.222998],[-49.987030,-242.992570],[-37.772781,-245.173810],[-25.359802,-246.751133],[-12.763672,-247.708955],[0.000000,-248.031693]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-78.712540,186.000015],[-75.201645,187.503952],[-62.129639,192.232285],[-48.656845,196.068924],[-39.981232,198.000015],[-10.629929,198.000015],[-10.629929,186.000015],[-78.712540,186.000015]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[10.629929,182.650864],[10.629929,195.421005],[25.026657,200.660995],[29.759048,200.080276],[39.115250,198.482407],[48.318741,196.462540],[48.467361,196.422562],[10.629929,182.650864]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-120.560989,162.000015],[-115.427368,165.755875],[-107.832581,170.804001],[-102.518433,174.000015],[-10.629929,174.000015],[-10.629929,162.000015],[-120.560989,162.000015]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[10.629929,157.110580],[10.629929,169.880722],[67.698074,190.651840],[74.909378,187.974625],[83.398483,184.370407],[84.316147,183.930161],[10.629929,157.110580]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-147.408813,138.000015],[-143.241089,142.384476],[-136.693390,148.683243],[-135.195976,150.000015],[-10.629929,150.000015],[-10.629929,138.000015],[-147.408813,138.000015]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[10.629929,131.570328],[10.629929,144.340469],[98.957321,176.488998],[99.752823,176.061752],[107.597336,171.378006],[112.005539,168.468033],[10.629929,131.570328]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-166.729424,114.000015],[-166.448166,114.428726],[-161.114868,121.810837],[-157.792328,126.000015],[-10.629929,126.000015],[-10.629929,114.000015],[-166.729424,114.000015]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[10.629929,106.030045],[10.629929,118.800217],[123.826614,160.000412],[129.676163,155.333420],[134.501999,151.115799],[10.629929,106.030045]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-180.835442,90.000015],[-180.427811,90.856033],[-176.115097,98.940872],[-174.300331,102.000015],[-10.629929,102.000015],[-10.629929,90.000015],[-180.835442,90.000015]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[10.629929,80.489792],[10.629929,93.259933],[144.222855,141.883774],[149.355301,136.516312],[153.025070,132.317398],[10.629929,80.489792]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-190.923283,66.000015],[-187.959446,74.056839],[-186.298859,78.000015],[-10.629929,78.000015],[-10.629929,66.000015],[-190.923283,66.000015]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[10.629929,54.949539],[10.629929,67.719650],[161.071426,122.475906],[166.355118,115.206345],[168.259201,112.321884],[10.629929,54.949539]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-197.541069,42.000015],[-196.365620,47.441086],[-194.623745,54.000015],[-10.629929,54.000015],[-10.629929,42.000015],[-197.541069,42.000015]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[10.629929,29.409256],[10.629929,42.179367],[174.767441,101.920547],[176.061752,99.752823],[180.396011,91.683060],[180.593674,91.271011],[10.629929,29.409256]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-201.149338,18.000015],[-201.051270,19.375931],[-199.920204,28.874588],[-199.731953,30.000015],[-10.629929,30.000015],[-10.629929,18.000015],[-201.149338,18.000015]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[134.462448,10.629929],[199.315933,34.234665],[200.080276,29.759048],[201.021896,22.085464],[169.548080,10.629929],[134.462448,10.629929]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[64.291122,10.629929],[193.890182,57.800125],[194.031052,57.359146],[196.462540,48.318741],[196.940628,46.140274],[99.376785,10.629929],[64.291122,10.629929]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[10.629929,10.629929],[10.629929,16.639114],[185.665970,80.347031],[187.974625,74.909378],[190.097977,69.189987],[29.205490,10.629929],[10.629929,10.629929]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-201.826424,-6.000000],[-201.968666,0.000015],[-201.826424,6.000000],[-10.629929,6.000000],[-10.629929,-6.000000],[-201.826424,-6.000000]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-199.731953,-30.000000],[-199.920204,-28.874573],[-201.051270,-19.375900],[-201.149338,-18.000000],[-10.629929,-18.000000],[-10.629929,-30.000000],[-199.731953,-30.000000]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[199.315933,-34.234665],[134.462448,-10.629929],[169.548172,-10.629929],[201.021896,-22.085434],[200.080276,-29.759033],[199.315933,-34.234665]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-194.623745,-54.000000],[-196.365620,-47.441055],[-197.541069,-42.000000],[-10.629929,-42.000000],[-10.629929,-54.000000],[-194.623745,-54.000000]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[193.890182,-57.800110],[64.291153,-10.629929],[99.376816,-10.629929],[196.940659,-46.140259],[196.462540,-48.318726],[194.031052,-57.359161],[193.890182,-57.800110]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-186.298859,-78.000000],[-187.959446,-74.056824],[-190.923275,-66.000000],[-10.629929,-66.000000],[-10.629929,-78.000000],[-186.298859,-78.000000]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[185.665970,-80.347031],[10.629929,-16.639114],[10.629929,-10.629929],[29.205490,-10.629929],[190.097977,-69.190002],[187.974625,-74.909393],[185.665970,-80.347031]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[174.767441,-101.920563],[10.629929,-42.179382],[10.629929,-29.409241],[180.593674,-91.270996],[180.396011,-91.683075],[176.061752,-99.752808],[174.767441,-101.920563]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-174.300339,-102.000000],[-176.115097,-98.940857],[-180.427811,-90.856018],[-180.835442,-90.000000],[-10.629929,-90.000000],[-10.629929,-102.000000],[-174.300339,-102.000000]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[161.071457,-122.475883],[10.629929,-67.719650],[10.629929,-54.949524],[168.259232,-112.321884],[166.355118,-115.206345],[161.071457,-122.475883]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-157.792336,-125.999992],[-161.114868,-121.810837],[-166.448166,-114.428711],[-166.729431,-114.000000],[-10.629929,-114.000000],[-10.629929,-125.999992],[-157.792336,-125.999992]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[144.222855,-141.883766],[10.629929,-93.259918],[10.629929,-80.489777],[153.025101,-132.317375],[149.355301,-136.516335],[144.222855,-141.883766]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-135.195999,-149.999992],[-136.693390,-148.683243],[-143.241089,-142.384460],[-147.408836,-137.999992],[-10.629929,-137.999992],[-10.629929,-149.999992],[-135.195999,-149.999992]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[123.826645,-160.000412],[10.629929,-118.800171],[10.629929,-106.030045],[134.501999,-151.115791],[129.676163,-155.333427],[123.826645,-160.000412]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-102.518463,-173.999992],[-107.832581,-170.804008],[-115.427368,-165.755882],[-120.561012,-161.999992],[-10.629929,-161.999992],[-10.629929,-173.999992],[-102.518463,-173.999992]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[98.957352,-176.488991],[10.629929,-144.340439],[10.629929,-131.570320],[112.005569,-168.468033],[107.597366,-171.377998],[99.752823,-176.061737],[98.957352,-176.488991]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[67.698105,-190.651836],[10.629929,-169.880707],[10.629929,-157.110573],[84.316147,-183.930168],[83.398483,-184.370411],[74.909378,-187.974628],[67.698105,-190.651836]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[-39.981323,-197.999989],[-48.656845,-196.068909],[-62.129639,-192.232285],[-75.201645,-187.503948],[-78.712601,-185.999989],[-10.629929,-185.999989],[-10.629929,-197.999989],[-39.981323,-197.999989]]);
         translate([0, 0, -fudge])
           linear_extrude(height=h+2*fudge)
             polygon([[25.026688,-200.660961],[10.629929,-195.420971],[10.629929,-182.650833],[48.467392,-196.422554],[48.318741,-196.462536],[39.115250,-198.482395],[29.759048,-200.080276],[25.026688,-200.660961]]);
      }
    }

    //tube(6, 63.5, 2);
  }
}

module tube(height, radius, wall, center = false) {
  
  trans = (center) ? -(height/2)-1 : -1;

  difference() {
    cylinder(h=height, r=radius, center=center, $fn=64);
    translate([0,0,trans])
      cylinder(h=height+2, r=radius-wall, center=false, $fn=64);
  }
}

height = 2;

union()
{
  difference()
  {
    poly_path1(height);
    translate([0,0,-(height/2)])
      cylinder(h=height+2, r=22, center=false, $fn=64);
  }

  tube(height, 22, 1);

  tube(6, 63.3, 1.5);
}
